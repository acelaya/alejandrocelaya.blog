---
import { Container } from '../components/Container';
import { SectionTitle } from '../components/SectionTitle';
import { Search } from '../components/Search';
import Layout from '../layouts/Layout.astro';
import { getAllPosts } from '../utils/posts';

const posts = await getAllPosts().then((posts) =>
  // Get rid of the `render` function, which cannot be serialized
  (posts as any[]).map(({ render, ...post }) => post)
);
---

<Layout url="/search/">
  <Container className="search-section">
    <SectionTitle>Search</SectionTitle>

    <Search posts={posts} client:only="react" />
  </Container>
</Layout>
